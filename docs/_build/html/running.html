
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Running &#8212; Australian Farm Optimisation Model 0.0.1 documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Tips" href="tips.html" />
    <link rel="prev" title="Installing" href="installing.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="running">
<h1>Running<a class="headerlink" href="#running" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>AFO requires Python to be installed on your device and can be run using any IDLE or through
the teminal. The model is controlled via the Exp1.py module and exp.xlsx spreadsheet. AFO is run from Exp1.py
but the trials which are run and the application of any sensitivities are controlled using exp.xlsx.
To customise the execution you can pass in optional args to Exp1.py &lt;experiment number&gt; &lt;processors&gt;
which control the experiment to be run and the number of processors used. If no arguments are passed
experiment type 0 will be executed using 1 processor. Once the model has been run two output files per trial will have been
saved to the pkl folder. To generate an excel report run ReportControl.py. The execution can also
customised by passing in some optional args &lt;experiment number&gt; &lt;processors&gt; &lt;report number&gt;.
If no arguments are passed experiment type 0 will be reported using 1 processor and the default report settings.</p>
</div>
<div class="section" id="idle">
<h2>IDLE<a class="headerlink" href="#idle" title="Permalink to this headline">¶</a></h2>
<p>Scripts can be run by any python interpreter. Although the necessary packages must be installed (this can be done using <code class="docutils literal notranslate"><span class="pre">pip</span></code>).
Anaconda comes with the spyder idle. Spyder has its strong points but it becomes tediously slow when
debugging the livestock module due to the large arrays. So we tend to used Pycharm.
Pycharm IDLE handles the debugging efficiently and has many useful capabilities built in. For more information
check out the documentation or youtube help videos. To run AFO from an IDLE, simply navigate to the Exp1.py module and
and apply the run command (usually a play button or the like).</p>
</div>
<div class="section" id="run-using-cmd-terminal">
<h2>Run using cmd/terminal<a class="headerlink" href="#run-using-cmd-terminal" title="Permalink to this headline">¶</a></h2>
<p>The model can be run through the cmd/terminal. This is used for cloud computing.
To run the script on terminal; navigate to the directory with the model and run the script
using the following command: <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">Exp1.py</span> <span class="pre">&lt;experiment</span> <span class="pre">number&gt;</span> <span class="pre">&lt;processors&gt;</span></code>
The python used is the one listed in PATH but you can use others by specifying
the path when running the command eg <code class="docutils literal notranslate"><span class="pre">/PATH/python</span> <span class="pre">Exp1.py</span> <span class="pre">&lt;experiment</span> <span class="pre">number&gt;</span> <span class="pre">&lt;processors&gt;</span></code>.
A similar process can be done using the anaconda prompt.</p>
</div>
<div class="section" id="exp-xlsx">
<h2>Exp.xlsx<a class="headerlink" href="#exp-xlsx" title="Permalink to this headline">¶</a></h2>
<p>Firstly some Terminology.</p>
<dl class="simple">
<dt>Analysis:</dt><dd><p>An analysis is all the lines of Exp.xlsx and may also include the same Exp.xlsx being used on multiple regional models.</p>
</dd>
<dt>Experiment:</dt><dd><p>An experiment is a block of Exp.xlsx that is examining an individual question pertaining to that analysis</p>
</dd>
<dt>Trial:</dt><dd><p>A trial is a single line within an experiment.</p>
</dd>
</dl>
<p>Exp.xlsx is used to control the sensitivity values for each trial. It also controls if the
trial is run, the level of output and if the trial is reported. Trials are grouped into
experiments in the ‘Exp Group’ column. Trials with the same number are in the same experiment.
The user can then select which experiment to run by passing in a number when running the
scripts from terminal (e.g. python Exp.py 2 this will run all the trials with a 2 in the
‘Exp Group’ column). If no argument is passed in then all trials are included. In Pycharm
you can pass in an argument by right click on the module name then there is an option to
Create (it changes to Edit once yo have used it). In there is a parameter box which you put
a value in. Within an experiment you can use True/False in the ‘Run Trials’ column to
control if a given trial is executed.</p>
<dl class="simple">
<dt>Reporting</dt><dd><p>Running the reports is much like running the model (see above), simply just run
ReportControl.py inplace of Exp.py. As with running the core model an argument can be
passed into the script when running via the terminal which controls which experiment to report.
For further information on reporting see the report section.</p>
</dd>
</dl>
</div>
<div class="section" id="size-ram-speed">
<h2>Size: RAM &amp; Speed<a class="headerlink" href="#size-ram-speed" title="Permalink to this headline">¶</a></h2>
<p>This table is a record of the resources used for different trials. The number of slices in the stock axes for both dams and offspring, and the number of rotations are the main variables that will alter resources</p>
<table class="docutils align-default" id="id1">
<caption><span class="caption-text">Running</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Trial details</p></th>
<th class="head"><p>Scenario description CPU/RAM (gb)/# of processors</p></th>
<th class="head"><p>Amount used RAM, pkl file size, time per loop</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>FVP 4,3 N 5,4 (1875, 192) scan=0, everything else small</p></td>
<td><p>48 / 384 / 1</p></td>
<td><p>~50%, , 60 mins</p></td>
</tr>
<tr class="row-odd"><td><p>FVP 5,3 N 3,4 (375, 192) scan=0, everything else small</p></td>
<td><p>64GB ubuntu</p></td>
<td><p>Max ~33GB, , 20 mins</p></td>
</tr>
<tr class="row-even"><td><p>FVP 5,3 N 3,5 scan=0, everything else small</p></td>
<td><p>64GB ubuntu</p></td>
<td><p>Max 39GB,</p></td>
</tr>
<tr class="row-odd"><td><p>FVP 4,3 N 4,5 scan=0, everything else small</p></td>
<td><p>64GB ubuntu</p></td>
<td><p>Max 39GB,</p></td>
</tr>
<tr class="row-even"><td><p>FVP 4,3 N 4,4 scan=0, everything else small</p></td>
<td><p>64GB ubuntu, 2 processors</p></td>
<td><p>Killed 1 processor.</p></td>
</tr>
<tr class="row-odd"><td><p>FVP 4,3 N 4,4 scan=0, everything else small</p></td>
<td><p>64GB ubuntu, 30GB swap, 2 processors</p></td>
<td><p>Successful (required 3GB of swap) 1460sec</p></td>
</tr>
<tr class="row-even"><td><p>FVP 4,3 N 3,4 scan=0, everything else small</p></td>
<td><p>Uni Multiprocess with 5 proccessors</p></td>
<td><p>6mins ish. Didnt check RAM but it handled 5 without crashing</p></td>
</tr>
<tr class="row-odd"><td><p>FVP 3,3 N 1,2 scan=0, everything else small</p></td>
<td><p>Uni Multiprocess with 16 proccessors</p></td>
<td><p>20GB (36s per loop)</p></td>
</tr>
<tr class="row-even"><td><p>FVP 3,3 N 5,6 scan=0, everything else small</p></td>
<td><p>T7600 with 64GB 1 processor used</p></td>
<td><p>26 mins. Only possible w/o the full report information</p></td>
</tr>
<tr class="row-odd"><td><p>FVP 3,3 N 5,5 scan=0, everything else small</p></td>
<td><p>T7600 with 64GB 1 processor used</p></td>
<td><p>20 mins. Handled storing the full report information</p></td>
</tr>
<tr class="row-even"><td><p>FVP 3,3 N 3,3 scan=1, everything else small</p></td>
<td><p>64GB ubuntu Multiprocess with 12 proccessors</p></td>
<td><p>Handled no problem</p></td>
</tr>
<tr class="row-odd"><td><p>FVP 3,3 N 3,3 scan=2, everything else small</p></td>
<td><p>64GB ubuntu Multiprocess with 12 proccessors</p></td>
<td><p>Handled sitting around 50GB RAM</p></td>
</tr>
<tr class="row-even"><td><p>FVP 3,3 N 3,3 scan=3, everything else small</p></td>
<td><p>64GB ubuntu Multiprocess with 12 proccessors</p></td>
<td><p>Killed one processor</p></td>
</tr>
<tr class="row-odd"><td><p>FVP3,3 N1,6</p></td>
<td><p>32GB HP 1 processor</p></td>
<td><p>Completed in 900sec. Used most memory (about 26GB)</p></td>
</tr>
<tr class="row-even"><td><p>FVP4,3 N5,4 LWi2 Scan=0 without large reports</p></td>
<td><p>GoogleCloud 786GB N2D 8 processors</p></td>
<td><p>Max memory 624gb 40mis per cycle (tried and failed with 10 processorrs)</p></td>
</tr>
<tr class="row-odd"><td><p>FVP4,3 N5,4 LWi2 Scan=0 without large reports</p></td>
<td><p>GoogleCloud 256GB N2D Highmem ($2.20/hr)</p></td>
<td><p>With 3 processors one was killed. With 2 processors max memory 79.8%, pkl files 0.3GB, 35mins per cycle</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default" id="id2">
<caption><span class="caption-text">Reporting</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Trial details</p></th>
<th class="head"><p>Scenario description CPU/RAM (gb)/# of processors</p></th>
<th class="head"><p>Amount used RAM, pkl file size, time per loop</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>FVP 4,3 N 3,4 Large reports included</p></td>
<td><p>64GB ubuntu Multiprocess with 16 proccessors</p></td>
<td><p>Slower and ran out of RAM. Cut down to 3 processors and it seemed to be okay. But close to limit.</p></td>
</tr>
</tbody>
</table>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Australian Farm Optimisation Model</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="model_doc.html">Model Logic</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="usage.html">Usage</a><ul>
      <li>Previous: <a href="installing.html" title="previous chapter">Installing</a></li>
      <li>Next: <a href="tips.html" title="next chapter">Tips</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, Michael Young & John Young.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.5.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/running.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>